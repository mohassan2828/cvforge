<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canva Style Pro CV</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        /* --- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© (Ù…Ø§ ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„) --- */
        body { font-family: 'Cairo', sans-serif; background: #eceff1; margin: 0; direction: rtl; }
        .editor-container { padding: 20px; max-width: 500px; margin: auto; }
        .input-card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        input, textarea { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-family: inherit; }
        .btn-generate { width: 100%; padding: 15px; background: #2c3e50; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 18px; }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ù€ PDF (Ø§Ù„Ø³Ø± Ù‡Ù†Ø§) --- */
        #pdf-content { position: absolute; left: -10000px; top: 0; } /* Ù…Ø®ÙÙŠ Ø¹Ù† Ø§Ù„Ø¹ÙŠÙ† Ù„ÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯ Ù„Ù„Ù…ÙƒØªØ¨Ø© */
        
        .cv-page {
            width: 210mm; height: 296mm;
            background: #ffffff; display: flex !important;
            position: relative; overflow: hidden;
        }

        /* Ø§Ù„Ø²Ø®Ø±ÙØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„Ù…Ø§Ø¦Ù„Ø© */
        .top-banner {
            position: absolute; top: 0; left: 0; width: 400px; height: 80px;
            background: linear-gradient(135deg, #2c3e50, #d4af37) !important;
            clip-path: polygon(0 0, 100% 0, 85% 100%, 0% 100%);
            -webkit-print-color-adjust: exact; z-index: 2;
        }

        /* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø§Ù„ÙØ­Ù…ÙŠ */
        .side-bar {
            width: 35%; background: #2c3e50 !important;
            color: white !important; padding: 60px 30px;
            box-sizing: border-box; -webkit-print-color-adjust: exact;
        }

        .img-frame {
            width: 180px; height: 180px; border: 5px solid #d4af37;
            margin: 0 auto 40px; border-radius: 10px; overflow: hidden;
            background: #34495e;
        }
        #resPhoto { width: 100%; height: 100%; object-fit: cover; }

        .side-bar h3 { color: #d4af37 !important; border-bottom: 1px solid #4a6278; padding-bottom: 8px; font-size: 22px; }
        .contact-info { font-size: 14px; margin-bottom: 15px; color: #cfd8dc !important; }

        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ø£Ø¨ÙŠØ¶ */
        .main-bar { width: 65%; padding: 80px 40px; box-sizing: border-box; }
        .cv-name { font-size: 50px; color: #2c3e50 !important; margin: 0; font-weight: 900; line-height: 1.1; }
        .cv-title { font-size: 24px; color: #d4af37 !important; margin: 10px 0 40px; font-weight: 400; }

        .section-box { margin-bottom: 35px; }
        .section-box h4 { 
            font-size: 20px; color: #2c3e50 !important; border-right: 6px solid #d4af37; 
            padding: 10px 15px; background: #f5f7f9 !important; margin-bottom: 15px;
            -webkit-print-color-adjust: exact;
        }
        .section-text { font-size: 16px; line-height: 1.8; color: #37474f !important; white-space: pre-line; padding-right: 15px; }

        .skill-pill { 
            display: inline-block; background: rgba(255,255,255,0.1) !important; 
            padding: 5px 12px; border-radius: 4px; font-size: 12px; 
            border: 1px solid #d4af37; margin: 4px; color: white !important;
            -webkit-print-color-adjust: exact;
        }
    </style>
</head>
<body>

    <div class="editor-container">
        <header style="text-align: center; margin-bottom: 20px;">
            <h2 style="color: #2c3e50;">Ù…ÙØµÙ…Ù… Ø§Ù„Ù€ CV Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ âœ¨</h2>
        </header>

        <div class="input-card">
            <input type="file" id="fPhoto" accept="image/*" onchange="loadImg(event)">
            <input type="text" id="iName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
            <input type="text" id="iJob" placeholder="Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ">
            <input type="email" id="iEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            <input type="tel" id="iPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
            <input type="text" id="iLoc" placeholder="Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ø¯ÙˆÙ„Ø©)">
            <textarea id="iAbout" rows="3" placeholder="Ù†Ø¨Ø°Ø© ØªØ¹Ø±ÙŠÙÙŠØ©..."></textarea>
            <textarea id="iExp" rows="4" placeholder="Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©"></textarea>
            <textarea id="iEdu" rows="3" placeholder="Ø§Ù„Ù…Ø¤Ù‡Ù„Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©"></textarea>
            <input type="text" id="iSkills" placeholder="Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙØ§ØµÙ„Ø© ,)">
            
            <button onclick="makePDF()" class="btn-generate">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„ÙØ®Ù… ğŸš€</button>
        </div>
    </div>

    <div id="pdf-content">
        <div id="target-cv" class="cv-page">
            <div class="top-banner"></div>
            
            <aside class="side-bar">
                <div class="img-frame"><img id="resPhoto" src=""></div>
                <section>
                    <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ</h3>
                    <div id="resLoc" class="contact-info"></div>
                    <div id="resPhone" class="contact-info"></div>
                    <div id="resEmail" class="contact-info"></div>
                </section>
                <section style="margin-top: 40px;">
                    <h3>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h3>
                    <div id="resSkills"></div>
                </section>
            </aside>

            <main class="main-bar">
                <h1 id="resName" class="cv-name"></h1>
                <h2 id="resJob" class="cv-title"></h2>
                
                <div class="section-box">
                    <h4>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h4>
                    <p id="resAbout" class="section-text"></p>
                </div>

                <div class="section-box">
                    <h4>Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h4>
                    <div id="resExp" class="section-text"></div>
                </div>

                <div class="section-box">
                    <h4>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h4>
                    <div id="resEdu" class="section-text"></div>
                </div>
            </main>
        </div>
    </div>

    <script>
        let imgData = "";
        function loadImg(e) {
            const r = new FileReader();
            r.onload = () => { imgData = r.result; document.getElementById('resPhoto').src = imgData; };
            r.readAsDataURL(e.target.files[0]);
        }

        function makePDF() {
            // Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ù„Ø¨
            document.getElementById('resName').innerText = document.getElementById('iName').value || "Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§";
            document.getElementById('resJob').innerText = document.getElementById('iJob').value || "Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ";
            document.getElementById('resAbout').innerText = document.getElementById('iAbout').value;
            document.getElementById('resExp').innerText = document.getElementById('iExp').value;
            document.getElementById('resEdu').innerText = document.getElementById('iEdu').value;
            document.getElementById('resEmail').innerText = "âœ‰ï¸ " + document.getElementById('iEmail').value;
            document.getElementById('resPhone').innerText = "ğŸ“ " + document.getElementById('iPhone').value;
            document.getElementById('resLoc').innerText = "ğŸ“ " + document.getElementById('iLoc').value;

            const sContainer = document.getElementById('resSkills');
            sContainer.innerHTML = "";
            document.getElementById('iSkills').value.split(',').forEach(s => {
                if(s.trim()) sContainer.innerHTML += `<span class="skill-pill">${s.trim()}</span>`;
            });

            const element = document.getElementById('target-cv');
            const opt = {
                margin: 0,
                filename: 'Professional_CV.pdf',
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 3, useCORS: true, letterRendering: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
