<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CVForge | Multi-Language Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Inter:wght@400;700;900&family=Almarai:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root { 
            --primary: #6366f1;
            --secondary: #0ea5e9;
            --bg-site: #f8fafc;
            --text-main: #0f172a;
        }

        /* تنسيقات اللغة */
        [dir="ltr"] { font-family: 'Inter', sans-serif; }
        [dir="rtl"] { font-family: 'Cairo', sans-serif; }

        body { margin: 0; background: var(--bg-site); color: var(--text-main); transition: all 0.3s ease; }

        /* زر تبديل اللغة العائم */
        .lang-switcher {
            position: fixed; top: 20px; left: 20px; z-index: 1000;
            background: white; border: 2px solid var(--primary);
            padding: 8px 15px; border-radius: 50px; cursor: pointer;
            font-weight: 900; color: var(--primary); box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        header { 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            padding: 25px; text-align: center; border-bottom: 1px solid #e2e8f0;
        }
        .brand-logo { display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 28px; font-weight: 900; }
        .brand-logo i { color: var(--primary); }
        .brand-logo span { background: linear-gradient(to left, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .app-container { width: 100%; max-width: 500px; margin: 20px auto; padding: 0 15px; box-sizing: border-box; }
        .card-editor { background: white; padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }

        .input-box { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 13px; font-weight: 700; color: #64748b; }
        input, textarea { width: 100%; padding: 12px; border-radius: 12px; border: 2px solid #f1f5f9; font-family: inherit; box-sizing: border-box; }

        .btn-create { 
            width: 100%; padding: 18px; background: linear-gradient(135deg, var(--primary), var(--secondary)); 
            border: none; border-radius: 15px; color: white; font-weight: 900; font-size: 18px; cursor: pointer;
        }

        /* --- تصميم الـ PDF الديناميكي --- */
        #pdf-hideout { position: absolute; left: -9999px; top: 0; }
        .cv-document { 
            width: 210mm; height: 297mm; background: white; 
            display: grid; grid-template-columns: 260px 1fr;
        }
        /* تبديل مكان العمود عند اللغة الإنجليزية */
        [dir="ltr"] .cv-document { grid-template-columns: 1fr 260px; }
        [dir="ltr"] .cv-sidebar { order: 2; }
        [dir="ltr"] .cv-main { order: 1; padding-left: 25px; padding-right: 0; }

        .cv-sidebar { background: #0f172a; color: white; padding: 40px 25px; display: flex; flex-direction: column; }
        .cv-photo { width: 170px; height: 170px; border-radius: 20px; border: 4px solid var(--secondary); margin-bottom: 30px; object-fit: cover; align-self: center; }

        .cv-header-area { background: linear-gradient(135deg, #1e293b, #334155); padding: 70px 40px; color: white; }
        .cv-header-area h1 { font-family: 'Almarai', sans-serif; font-size: 50px; margin: 0; }
        .cv-header-area p { font-size: 22px; color: var(--secondary); font-weight: 700; }

        .cv-main { padding-right: 25px; }
        .cv-section { padding: 25px 40px; }
        .cv-title { font-size: 20px; font-weight: 900; color: var(--primary); border-bottom: 2px solid #f1f5f9; padding-bottom: 8px; margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
        .cv-text { font-size: 14px; line-height: 1.7; color: #334155; white-space: pre-line; }

        .s-title { font-size: 18px; font-weight: 900; color: var(--secondary); margin: 20px 0 10px; border-right: 4px solid var(--secondary); padding-right: 10px; }
        [dir="ltr"] .s-title { border-right: none; border-left: 4px solid var(--secondary); padding-left: 10px; padding-right: 0; }
        .s-content { font-size: 13px; line-height: 1.7; color: #cbd5e1; }
    </style>
</head>
<body dir="rtl">

    <div class="lang-switcher" onclick="toggleLanguage()" id="langBtn">English</div>

    <header>
        <div class="brand-logo"><i class="fas fa-pen-nib"></i><span>CVForge</span></div>
        <div id="tagline" class="brand-tagline">اصنع سيرة ذاتية تليق بمستقبلك المهني</div>
    </header>

    <div class="app-container">
        <div class="card-editor">
            <div class="input-box"><label id="l-name">الاسم الكامل</label><input type="text" id="inName"></div>
            <div class="input-box"><label id="l-job">المسمى الوظيفي</label><input type="text" id="inJob"></div>
            <div class="input-box"><label id="l-photo">الصورة الشخصية</label><input type="file" id="inPhoto"></div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-box"><label id="l-phone">الهاتف</label><input type="text" id="inPhone"></div>
                <div class="input-box"><label id="l-email">الايميل</label><input type="email" id="inEmail"></div>
            </div>

            <div class="input-box"><label id="l-about">النبذة الشخصية</label><textarea id="inAbout" rows="3"></textarea></div>
            <div class="input-box"><label id="l-exp">الخبرات العملية</label><textarea id="inExp" rows="4"></textarea></div>
            <div class="input-box"><label id="l-awards">الإنجازات</label><textarea id="inAwards" rows="3"></textarea></div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-box"><label id="l-edu">التعليم</label><textarea id="inEdu" rows="3"></textarea></div>
                <div class="input-box"><label id="l-lang">اللغات</label><textarea id="inLang" rows="3"></textarea></div>
            </div>

            <button class="btn-create" onclick="generateCV()" id="btn-text">تحميل الـ PDF</button>
        </div>
    </div>

    <div id="pdf-hideout">
        <div id="final-document" class="cv-document">
            <div class="cv-sidebar">
                <img id="outPhoto" class="cv-photo" src="">
                <div class="s-title" id="out-l-contact">التواصل</div>
                <div id="outContact" class="s-content"></div>
                <div class="s-title" id="out-l-edu">التعليم</div>
                <div id="outEdu" class="s-content"></div>
                <div class="s-title" id="out-l-lang">اللغات</div>
                <div id="outLang" class="s-content"></div>
            </div>
            <div class="cv-main">
                <div class="cv-header-area">
                    <h1 id="outName"></h1>
                    <p id="outJob"></p>
                </div>
                <div class="cv-section">
                    <div class="cv-title"><i class="fas fa-user"></i> <span id="out-l-about">النبذة الشخصية</span></div>
                    <div id="outAbout" class="cv-text"></div>
                </div>
                <div class="cv-section">
                    <div class="cv-title"><i class="fas fa-trophy"></i> <span id="out-l-awards">الإنجازات</span></div>
                    <div id="outAwards" class="cv-text"></div>
                </div>
                <div class="cv-section">
                    <div class="cv-title"><i class="fas fa-briefcase"></i> <span id="out-l-exp">الخبرة العملية</span></div>
                    <div id="outExp" class="cv-text"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'ar';
        const translations = {
            ar: {
                langBtn: "English", tagline: "اصنع سيرة ذاتية تليق بمستقبلك المهني",
                name: "الاسم الكامل", job: "المسمى الوظيفي", photo: "الصورة الشخصية", phone: "الهاتف", email: "الايميل",
                about: "النبذة الشخصية", exp: "الخبرات العملية", awards: "الإنجازات", edu: "التعليم", lang: "اللغات",
                btn: "تحميل الـ PDF", contact: "التواصل"
            },
            en: {
                langBtn: "العربية", tagline: "Create a professional CV in minutes",
                name: "Full Name", job: "Job Title", photo: "Profile Photo", phone: "Phone", email: "Email",
                about: "Profile Summary", exp: "Work Experience", awards: "Achievements", edu: "Education", lang: "Languages",
                btn: "Download PDF", contact: "Contact"
            }
        };

        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            const dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            
            document.body.dir = dir;
            document.getElementById('final-document').dir = dir;
            document.getElementById('langBtn').innerText = translations[currentLang].langBtn;
            document.getElementById('tagline').innerText = translations[currentLang].tagline;
            document.getElementById('btn-text').innerText = translations[currentLang].btn;
            
            // ترجمة اللابلات
            document.getElementById('l-name').innerText = translations[currentLang].name;
            document.getElementById('l-job').innerText = translations[currentLang].job;
            document.getElementById('l-phone').innerText = translations[currentLang].phone;
            document.getElementById('l-email').innerText = translations[currentLang].email;
            document.getElementById('l-about').innerText = translations[currentLang].about;
            document.getElementById('l-exp').innerText = translations[currentLang].exp;
            document.getElementById('l-awards').innerText = translations[currentLang].awards;
            document.getElementById('l-edu').innerText = translations[currentLang].edu;
            document.getElementById('l-lang').innerText = translations[currentLang].lang;

            // ترجمة عناوين الـ PDF
            document.getElementById('out-l-contact').innerText = translations[currentLang].contact;
            document.getElementById('out-l-edu').innerText = translations[currentLang].edu;
            document.getElementById('out-l-lang').innerText = translations[currentLang].lang;
            document.getElementById('out-l-about').innerText = translations[currentLang].about;
            document.getElementById('out-l-awards').innerText = translations[currentLang].awards;
            document.getElementById('out-l-exp').innerText = translations[currentLang].exp;
        }

        document.getElementById('inPhoto').onchange = e => {
            const r = new FileReader();
            r.onload = () => document.getElementById('outPhoto').src = r.result;
            r.readAsDataURL(e.target.files[0]);
        };

        async function generateCV() {
            document.getElementById('outName').innerText = document.getElementById('inName').value || "Name";
            document.getElementById('outJob').innerText = document.getElementById('inJob').value || "Position";
            document.getElementById('outContact').innerText = `${document.getElementById('inPhone').value}\n${document.getElementById('inEmail').value}`;
            document.getElementById('outAbout').innerText = document.getElementById('inAbout').value;
            document.getElementById('outExp').innerText = document.getElementById('inExp').value;
            document.getElementById('outEdu').innerText = document.getElementById('inEdu').value;
            document.getElementById('outLang').innerText = document.getElementById('inLang').value;
            document.getElementById('outAwards').innerText = document.getElementById('inAwards').value;

            const element = document.getElementById('final-document');
            const canvas = await html2canvas(element, { scale: 4, useCORS: true });
            const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
            pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 210, 297);
            pdf.save('CVForge_Professional.pdf');
        }
    </script>
</body>
</html>
